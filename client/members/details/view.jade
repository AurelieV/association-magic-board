#member
  .header-name(layout="row" ng-if="!edit.name" layout-align="start")
    span.name {{ member.lastname | uppercase }} {{ member.firstname }}
    span.mdi.mdi-pencil(ng-click="editName()")
  .header-name(ng-if="edit.name")
    form(name="editNameForm" layout="row")
      md-input-container(flex)
        label Nom
        input(type="text" required ng-model="editMember.lastname")
      md-input-container(flex)
        label Prénom
        input(type="text" required ng-model="editMember.firstname")
    .actions(layout="row")
      span(flex)
      md-button.md-button(ng-click="cancelName()") Annuler
      md-button.md-button.md-primary(ng-click="saveName(editNameForm)" ng-disabled="!editNameForm.$valid") Enregistrer

  .informations(flex="100" layout="column" layout-align="center start")
    .block.md-whiteframe-z1
      .header-title(layout="row")
        .title(flex) Informations générales
        .actions(ng-if="!edit.globalInfo")
          span.mdi.mdi-pencil(ng-click="editGlobalInfo()")
      .content(ng-if="!edit.globalInfo")
        .info
          span.subtitle DCI:
          span.value  {{ member.dci_number }}
        .info
          span.subtitle Email:
          span.value(ng-if="member.email")  {{ member.email }}
          span.value(ng-if="!member.email")  Pas de mail renseigné
      .content(ng-if="edit.globalInfo")
        form(name="editGlobalInfoForm")
          md-input-container
            label Numéro DCI
            input(type="text" name="dci_number" required ng-model="editMember.dci_number" dci-input)
            div(ng-messages="add.dci_number.$error" ng-show="add.dci_number.$error.dci_number")
              div(ng-message="dci_number") Numéro DCI déjà utilisé
          md-input-container
            label Email
            input(type="email" ng-model="editMember.email")
        .actions(ng-if="edit.globalInfo" layout="row")
          span(flex)
          md-button.md-button(ng-click="cancelGlobalInfo()") Annuler
          md-button.md-button.md-primary(ng-click="saveGlobalInfo(editGlobalInfoForm)" ng-disabled="!editGlobalInfoForm.$valid") Enregistrer

    .block.md-whiteframe-z1
      .header-title(layout="row")
        .title(flex) Informations générales
      .content
        .info(ng-repeat="season in seasons | orderBy:'-start'")
          span.subtitle
            a.no-style(ui-sref="seasons.details({id: season.id})") {{ season.name }}:
          span.value(ng-if="season.contributions.length > 0")
            span  {{ season.contributions[0].amount }} € le {{ season.contributions[0].date | date:'dd/MM/yyyy'}}
            md-button.md-button.md-primary.edit-contribution(ng-if="!edit.contribution" ng-click="editContribution(season)" ng-disabled="edit.contribution")
              |  Editer
          span.value(ng-if="season.contributions.length == 0")
            span  Non membre
            md-button.md-button.md-primary.add-contribution(ng-if="!edit.contribution" ng-click="addContribution(season)" ng-disabled="edit.addContribution")
              |  Ajouter
          div(ng-if="season.isAdding")
            form(name="addContributionForm" layout="row")
              md-input-container.amount(flex)
                label Montant (€)
                input(type="number" ng-model="newContribution.amount" required)
              mdc-date-picker.date(flex model="newContribution.date" label="Date")
            .actions(layout="row")
              span(flex)
              md-button.md-button(ng-click="cancelAddContribution(season)") Annuler
              md-button.md-button.md-primary(ng-click="saveAddContribution(addContributionForm, season)" ng-disabled="!addContributionForm.$valid") Enregistrer
          div(ng-if="season.isEditing")
            form(name="editContributionForm" layout="row")
              md-input-container.amount(flex)
                label Montant (€)
                input(type="number" ng-model="editedContribution.amount" required)
              mdc-date-picker(flex model="editedContribution.date" label="Date").date
            .actions(layout="row")
              span(flex)
              md-button.md-button(ng-click="cancelEditContribution(season)") Annuler
              md-button.md-button.md-primary(ng-click="saveEditContribution(editContributionForm, season)" ng-disabled="!editContributionForm.$valid") Enregistrer
